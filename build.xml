<?xml version="1.0" encoding="UTF-8"?>
<!--
This file is part of the SavaPage project <https://www.savapage.org>.
Copyright (c) 2020 Datraverse B.V.
Author: Rijk Ravestein.

SPDX-FileCopyrightText: Â© 2020 Datraverse BV <info@datraverse.com> 
SPDX-License-Identifier: AGPL-3.0-or-later 

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see <https://www.gnu.org/licenses/>.

For more information, please contact Datraverse B.V. at this
address: info@datraverse.com
-->
<project name="savapage-core" default="versioninfo" basedir=".">

	<description>Generates VersionInfo.java for savapage-core.</description>

	<!-- .................................................................. -->
	<!--  Common properties with _common_ prefix                            -->
	<!-- .................................................................. -->
	<import file="../savapage-common/build-common.xml" />

	<!-- .................................................................. -->
	<!--  This build.xml is called from Maven. See maven-antrun-plugin in   -->
	<!--  'pom.xml'. Properties, other than _common, are ser in pom.xml     -->
	<!-- .................................................................. -->
	<!--  Use commmand 'mvn package' to re-generate VersionInfo.java        -->
	<!-- .................................................................. -->

	<!-- .................................................................. -->
	<!--  Apply the template                                                -->
	<!-- .................................................................. -->
	<target name="versioninfo">
		<tstamp>
			<format property="TSTAMP" pattern="yyyy-MM-dd'T'HH:mm:ss" />
		</tstamp>

		<echo message="Copying/Filter VersionInfo-template.java ${TSTAMP} to VersionInfo.java ..." />
		<copy tofile="${_src.dir}/${_product.package.path}/VersionInfo.java" overwrite="true">
			<fileset dir="../savapage-common/">
				<include name="VersionInfo-template.java" />
			</fileset>
			<filterset>
				<filter token="DISCLAIMER" value="Generated by Ant build.xml" />
				<filter token="GENERATE_INFO" value="Date/Time: ${TSTAMP}" />
				<filter token="LICENSE_NAME" value="${_license.name}" />
				<filter token="LICENSE_URL" value="${_license.url}" />
				<filter token="PACKAGE" value="${_product.package}" />
				<filter token="PRODUCT" value="${_common.product}" />
				<filter token="MODULE" value="${_product.license}" />
				<filter token="NAME" value="${_product.name}" />
				<filter token="BUILD_DATE" value="${TSTAMP}" />
				<filter token="BUILD_EPOCH_SECS" value="${_common.build.epoch.seconds}" />
				<filter token="VERSION_MAJOR" value="${_common.version.major}" />
				<filter token="VERSION_MINOR" value="${_common.version.minor}" />
				<filter token="VERSION_REVISION" value="${_common.version.revision}" />
				<filter token="VERSION_STATUS" value="${_common.version.status}" />
				<filter token="VERSION_BUILD" value="${_common.version.build}" />
				<filter token="DB_SCHEMA_VERSION_MAJOR" value="${_common.db.schema.version.major}" />
				<filter token="DB_SCHEMA_VERSION_MINOR" value="${_common.db.schema.version.minor}" />
			</filterset>
		</copy>
	</target>

</project>